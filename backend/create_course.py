import os
import django

# Убедитесь, что переменная среды DJANGO_SETTINGS_MODULE указывает на настройки вашего проекта
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'config.settings')

# Инициализируйте Django
django.setup()

from api.models import Course, Module, Lesson, Step

# Найти существующий курс
course = Course.objects.get(title='Полное руководство по БАС: Беспилотные Авиационные Системы')

# Создать третий модуль
module = Module.objects.create(
    title='Поддержка, лечение и тенденции в БАС',
    course=course,
    order=2
)

# Создать уроки для третьего модуля
lesson_titles = [
    'Современные методы лечения',
    'Психологическая поддержка',
    'Реабилитация и восстановление',
    'Лекарственные средства',
    'Альтернативные подходы',
    'Поддержка семьи и окружения',
    'Паллиативная помощь',
    'Профилактика и будущие тенденции'
]

lessons = [Lesson.objects.create(title=title, module=module, order=index) for index, title in enumerate(lesson_titles)]

# Создать шаги для каждого урока
steps_data = {
    'Современные методы лечения': [
        ('text', {'html': '<p>Современные методы лечения БАС включают инновационные подходы...</p>'}),
        ('video', {'video_url': 'https://example.com/current-treatments.mp4'}),
        ('question', {
            'question': 'Какие современные методы лечения БАС существуют?',
            'answers': ['Генетическая терапия', 'Иммунотерапия', 'Клеточная терапия', 'Все перечисленное']
        }),
    ],
    'Психологическая поддержка': [
        ('text', {'html': '<p>Психологическая поддержка играет ключевую роль в жизни пациентов с БАС...</p>'}),
        ('video', {'video_url': 'https://example.com/psychological-support.mp4'}),
        ('question', {
            'question': 'Какой вид психологической поддержки наиболее важен для пациентов с БАС?',
            'answers': ['Когнитивно-поведенческая терапия', 'Групповая поддержка', 'Индивидуальные консультации', 'Все перечисленное']
        }),
    ],
    'Реабилитация и восстановление': [
        ('text', {'html': '<p>Реабилитационные программы помогают пациентам улучшить качество жизни...</p>'}),
        ('video', {'video_url': 'https://example.com/rehabilitation.mp4'}),
        ('question', {
            'question': 'Какие программы реабилитации наиболее эффективны при БАС?',
            'answers': ['Физиотерапия', 'Логопедия', 'Оккупационная терапия', 'Все перечисленное']
        }),
    ],
    'Лекарственные средства': [
        ('text', {'html': '<p>На рынке существуют различные лекарства для лечения симптомов БАС...</p>'}),
        ('video', {'video_url': 'https://example.com/medications.mp4'}),
        ('question', {
            'question': 'Какие лекарства используются для лечения симптомов БАС?',
            'answers': ['Рилузол', 'Эдаравон', 'Симптоматические средства', 'Все перечисленное']
        }),
    ],
    'Альтернативные подходы': [
        ('text', {'html': '<p>Альтернативные методы лечения могут дополнить традиционную терапию...</p>'}),
        ('video', {'video_url': 'https://example.com/alternative-approaches.mp4'}),
        ('question', {
            'question': 'Какие альтернативные подходы используются при БАС?',
            'answers': ['Акупунктура', 'Массаж', 'Диетотерапия', 'Все перечисленное']
        }),
    ],
    'Поддержка семьи и окружения': [
        ('text', {'html': '<p>Поддержка семьи играет важную роль в жизни пациентов с БАС...</p>'}),
        ('video', {'video_url': 'https://example.com/family-support.mp4'}),
        ('question', {
            'question': 'Как семья может поддерживать пациента с БАС?',
            'answers': ['Эмоциональная поддержка', 'Физическая помощь', 'Организация ухода', 'Все перечисленное']
        }),
    ],
    'Паллиативная помощь': [
        ('text', {'html': '<p>Паллиативная помощь направлена на улучшение качества жизни пациентов...</p>'}),
        ('video', {'video_url': 'https://example.com/palliative-care.mp4'}),
        ('question', {
            'question': 'Что включает в себя паллиативная помощь?',
            'answers': ['Управление болью', 'Эмоциональная поддержка', 'Уход в конце жизни', 'Все перечисленное']
        }),
    ],
    'Профилактика и будущие тенденции': [
        ('text', {'html': '<p>Будущие тенденции в области БАС связаны с новыми открытиями...</p>'}),
        ('video', {'video_url': 'https://example.com/future-trends.mp4'}),
        ('question', {
            'question': 'Какие тенденции ожидаются в лечении и профилактике БАС?',
            'answers': ['Разработка новых лекарств', 'Применение ИИ в диагностике', 'Генетические исследования', 'Все перечисленное']
        }),
    ],
}

for lesson in lessons:
    step_data = steps_data.get(lesson.title, [])
    for index, (step_type, content) in enumerate(step_data):
        Step.objects.create(lesson=lesson, order=index, step_type=step_type, content=content)

print("Третий модуль курса")
